{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\John\\\\Desktop\\\\UC-Socially-Undead\\\\src\\\\frontend\\\\src\\\\pages\\\\Login.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport LoggedInTester from '../buttons/LoggedInTester';\nimport styles from '../styles/Login.module.css';\nimport trident from '../icons/trident.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      token: '',\n      failed: false\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(event) {\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username: this.state.username,\n        password: this.state.password\n      })\n    };\n    this.setState({\n      username: '',\n      password: ''\n    });\n    fetch('http://127.0.0.1:8000/account/token_auth/', requestOptions).then(response => response.json()).then(data => {\n      this.setState({\n        token: data['token']\n      }, () => {\n        this.foo();\n      });\n    }).catch(console.log);\n    event.preventDefault();\n  } // On success, store the token somewhere and redirect to profile\n\n\n  foo() {\n    if (this.state.token) {\n      localStorage.setItem('auth-token', 'Token ' + this.state.token);\n      this.render(); //route\n\n      window.location.href = 'http://localhost:3000/profile';\n    } else {\n      this.setState({\n        failed: true\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.logo,\n        id: \"logo\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: trident,\n          className: styles.logoPic,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.logoText,\n          children: \"UC Socially Undead\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.wrapper,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"formTitle\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), this.state.failed ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.loginError,\n          children: \"Login Failed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 32\n        }, this) : console.log(), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: this.handleSubmit,\n          className: \"formWrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"field\",\n            value: this.state.username,\n            placeholder: \"Username\",\n            onChange: event => {\n              this.setState({\n                username: event.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 11\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 18\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"field\",\n            value: this.state.password,\n            placeholder: \"Password\",\n            onChange: event => {\n              this.setState({\n                password: event.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 11\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Submit\",\n            className: \"button\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/forgot_pass\",\n          state: {\n            from: \"occupation\"\n          },\n          className: styles.link,\n          children: \"Forgot your password?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          state: {\n            from: \"occupation\"\n          },\n          className: styles.link,\n          children: \"Don't have an account? Create account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default Login;","map":{"version":3,"names":["React","Component","Link","LoggedInTester","styles","trident","Login","constructor","props","state","username","password","token","failed","handleSubmit","bind","event","requestOptions","method","headers","body","JSON","stringify","setState","fetch","then","response","json","data","foo","catch","console","log","preventDefault","localStorage","setItem","render","window","location","href","logo","logoPic","logoText","wrapper","loginError","target","value","from","link"],"sources":["C:/Users/John/Desktop/UC-Socially-Undead/src/frontend/src/pages/Login.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport LoggedInTester from '../buttons/LoggedInTester';\r\nimport styles from '../styles/Login.module.css'\r\nimport trident from '../icons/trident.png';\r\n\r\nclass Login extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = { username: '',\r\n                     password: '',\r\n                     token: '',\r\n                     failed: false };\r\n\r\n      this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ \r\n              username: this.state.username,password: this.state.password})\r\n        };\r\n\r\n        this.setState({ username: '' ,\r\n                        password: ''})\r\n    \r\n        fetch('http://127.0.0.1:8000/account/token_auth/', requestOptions)\r\n              .then(response => response.json())\r\n              .then((data) => {\r\n                this.setState({ token: data['token'] }, () => {\r\n                    this.foo()\r\n              })\r\n        })\r\n        .catch(console.log)\r\n\r\n        event.preventDefault();\r\n    }\r\n\r\n    // On success, store the token somewhere and redirect to profile\r\n    foo() {\r\n        if (this.state.token) {\r\n            localStorage.setItem('auth-token', 'Token ' + this.state.token );\r\n\r\n            this.render();\r\n            //route\r\n            window.location.href = 'http://localhost:3000/profile';\r\n        } else {\r\n            this.setState({ failed: true })\r\n        }\r\n    }\r\n\r\n  \r\n    render() {\r\n      return ( \r\n        <>\r\n\r\n        <div className={styles.logo} id=\"logo\">\r\n\t\t\t    <img src={trident} className={styles.logoPic} alt=\"\"/> \r\n          <p className={styles.logoText}>UC Socially Undead</p>\r\n\t\t    </div>\r\n\r\n        <div className={styles.wrapper}>\r\n          <p className=\"formTitle\">Login</p>\r\n          {this.state.failed ? <div className={styles.loginError}>Login Failed</div> : console.log()}\r\n          <form onSubmit={this.handleSubmit}\r\n          className=\"formWrapper\"> \r\n\r\n          <input \r\n            type=\"text\" \r\n            className=\"field\"\r\n            value={this.state.username}\r\n            placeholder=\"Username\"\r\n            onChange={(event) => {\r\n              this.setState({ username: event.target.value })\r\n            }}/> <br />\r\n\r\n          <input \r\n          type=\"text\" \r\n          className=\"field\"\r\n          value={this.state.password} \r\n          placeholder=\"Password\"\r\n          onChange={(event) => {\r\n            this.setState({ password: event.target.value })\r\n          }}/> <br />\r\n\r\n          <input type=\"submit\" value=\"Submit\" className=\"button\"/>\r\n\r\n          </form>\r\n\r\n          <Link to=\"/forgot_pass\" state={{ from: \"occupation\" }}\r\n          className={styles.link}>\r\n            Forgot your password?\r\n          </Link>\r\n\r\n          <Link to=\"/register\" state={{ from: \"occupation\" }}\r\n          className={styles.link}>\r\n            Don't have an account? Create account\r\n          </Link>\r\n\r\n        </div>\r\n        </>\r\n      );\r\n    }\r\n  }\r\n\r\n  export default Login"],"mappings":"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"},"metadata":{},"sourceType":"module"}