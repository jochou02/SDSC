{"ast":null,"code":"var _jsxFileName = \"/Users/evelyn/Documents/GitHub/UC-Socially-Undead/src/frontend/src/pages/Calendar.js\";\nimport React from 'react';\nimport LoggedInTester from '../buttons/LoggedInTester';\nimport styles from '../styles/Calendar.module.css';\nimport Calendars from './components/CalendarUI.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Calendar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user_id: '',\n      ical_link: '',\n      cal: []\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.getCalendar = this.getCalendar.bind(this);\n  }\n\n  componentDidMount() {\n    const headers = {\n      \"Content-Type\": \"application/json\"\n    };\n\n    if (localStorage.getItem('auth-token')) {\n      headers[\"Authorization\"] = localStorage.getItem('auth-token');\n    }\n\n    fetch('http://127.0.0.1:8000/connect/get_info/', {\n      headers\n    }).then(response => response.json()).then(data => {\n      this.setState({\n        user_id: data.id\n      }, () => {\n        //console.log()\n        this.getCalendar();\n      });\n    }).catch(console.log);\n  }\n\n  handleSubmit() {\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': localStorage.getItem('auth-token')\n      },\n      body: JSON.stringify({\n        ical_link: this.state.ical_link\n      })\n    };\n    fetch('http://127.0.0.1:8000/schedule/upload_schedule/', requestOptions).then(response => response.json())\n    /*\n    .then((data) => {\n      this.setState({ }, () => {\n        console.log()})\n    })\n    */\n    .catch(console.log);\n  }\n\n  getCalendar() {\n    const headers = {\n      \"Content-Type\": \"application/json\"\n    };\n\n    if (localStorage.getItem('auth-token')) {\n      headers[\"Authorization\"] = localStorage.getItem('auth-token');\n    }\n\n    fetch('http://127.0.0.1:8000/schedule/get_schedule/', {\n      headers\n    }).then(response => response.json()).then(data => {\n      this.setState({\n        cal: data\n      }, () => {//console.log(data)\n      });\n    }).catch(console.log);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(LoggedInTester, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.calendarText,\n        children: localStorage.getItem('auth-token')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Calendars, {\n        cal: this.state.cal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        className: styles.calendarLabel,\n        children: \"iCal Link\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: event => {\n          this.setState({\n            ical_link: event.target.value\n          });\n        },\n        className: styles.calendarInput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.handleSubmit,\n        className: styles.calendarButton,\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 7\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.exportCal,\n        className: styles.calendarButton,\n        children: \"Export\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default Calendar;","map":{"version":3,"names":["React","LoggedInTester","styles","Calendars","Calendar","Component","constructor","props","state","user_id","ical_link","cal","handleSubmit","bind","getCalendar","componentDidMount","headers","localStorage","getItem","fetch","then","response","json","data","setState","id","catch","console","log","requestOptions","method","body","JSON","stringify","render","calendarText","calendarLabel","event","target","value","calendarInput","calendarButton","exportCal"],"sources":["/Users/evelyn/Documents/GitHub/UC-Socially-Undead/src/frontend/src/pages/Calendar.js"],"sourcesContent":["import React from 'react';\nimport LoggedInTester from '../buttons/LoggedInTester';\nimport styles from '../styles/Calendar.module.css'\nimport Calendars from './components/CalendarUI.js'\n\nclass Calendar extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { \n      user_id: '',\n      ical_link: '',\n      cal: []\n    };\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.getCalendar = this.getCalendar.bind(this);\n  }\n\n  componentDidMount() {\n    const headers = {\"Content-Type\": \"application/json\"};\n\n    if (localStorage.getItem('auth-token')) {\n        headers[\"Authorization\"] = localStorage.getItem('auth-token');\n    }\n\n    fetch('http://127.0.0.1:8000/connect/get_info/', { headers, })\n        .then(response => response.json())\n        .then((data) => {\n          this.setState({user_id: data.id}, () => {\n            //console.log()\n            this.getCalendar()})\n        })\n    .catch(console.log)\n  }\n\n  handleSubmit() {\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json', 'Authorization': localStorage.getItem('auth-token'),},\n      body: JSON.stringify({ \n        ical_link: this.state.ical_link,})\n    };\n  \n    fetch('http://127.0.0.1:8000/schedule/upload_schedule/', requestOptions)\n      .then(response => response.json())\n      /*\n      .then((data) => {\n        this.setState({ }, () => {\n          console.log()})\n      })\n      */\n      .catch(console.log)\n  }\n\n  getCalendar() {\n    const headers = {\"Content-Type\": \"application/json\"};\n\n    if (localStorage.getItem('auth-token')) {\n        headers[\"Authorization\"] = localStorage.getItem('auth-token');\n    }\n\n    fetch('http://127.0.0.1:8000/schedule/get_schedule/', { headers, })\n        .then(response => response.json())\n        .then((data) => {\n          this.setState({cal: data}, () => {\n            //console.log(data)\n          })\n        })\n    .catch(console.log)\n  }\n\n  render() {\n    return(<>\n      <LoggedInTester />\n      <p className={styles.calendarText}>{ localStorage.getItem('auth-token') }</p>\n\n      <Calendars cal={this.state.cal}/>\n      <br />\n\n      <label className={styles.calendarLabel}>iCal Link</label>\n      <br />\n\n      <input \n      onChange={(event) => {\n        this.setState({ ical_link: event.target.value })}}\n      className={styles.calendarInput}>\n      </input>\n      <br />\n\n      <button \n      onClick={this.handleSubmit}\n      className={styles.calendarButton}>\n        Submit\n      </button>\n      <br /> <br />\n\n      <button \n      onClick={this.exportCal}\n      className={styles.calendarButton}>\n        Export\n      </button>\n      <br />\n    </>)\n  }\n}\n\nexport default Calendar"],"mappings":"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"},"metadata":{},"sourceType":"module"}