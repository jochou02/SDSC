{"ast":null,"code":"var _jsxFileName = \"/Users/evelyn/Documents/GitHub/UC-Socially-Undead/src/frontend/src/pages/ForgotPass.js\";\nimport React, { Component } from 'react';\nimport LoggedInTester from '../buttons/LoggedInTester';\nimport styles from '../styles/ForgotPass.module.css';\n/*\n    Basically the workflow of this page goes like this.\n\n    1. User inputs email, and then when the \"Send Code\" button is hit, handleSubmitAuth is called.\n\n    2. handleSubmitAuth makes a call to the GenEmailAuth API on the server.\n        a. GenEmailAuth requires two input. One is the email for us to send the code to, another\n            is the mode indicator. Here, we indicated that we are in fpwd(forgot password) mode.\n\n        b. GenEmailAuth would then check whether the email is associated with any accounts.\n            In forgot password mode, there is supposed to be exactly one account that's associated, so\n            if there's none, GenEmailAuth would let us know by:\n                i. signaling something is wrong by sending auth_status = 1\n                ii. return an empty string as the authentication code. This is important because the\n                    default for auth_server is empty string and that's how we check if we have received\n                    a real authentication code from the server.\n\n        c. If there is, indeed, an account associated with the account, then GenEmailAuth generates a 8-digit\n            token, and sends it back to the front-end, which the front-end then stores as auth_server.\n\n            Now, realistically, GenEmailAuth is also supposed to send an email to the user, we will make that happen\n            down the road. To test the functionality, since the tokens are transmitted in plaintext, we could inspect\n            its value in the network section of the developer's mode.\n\n    3. Now that a code has been retrieved, auth_server is no longer empty string, so instead of requestAuthCode,\n        checkAuthCode is now going to be displayed, which:\n            a. Displays authForm, which takes in user's input for the authentication code, and\n                checks it against the code that server has sent us. Upon success, we mark auth_success to be True, at\n                which point...\n\n            b. Displays a \"Verification Success\" in place of the auth form.\n\n    4. With auth_success = True, !auth_sucess = False, so the submit button for the textbox that contains user's input\n        for new password would no longer be disabled. At this point, the user could input the desired new password, and\n        upon hitting submit, we call UpdatePassword API on the backend with the supplied password, and UpdatePassword\n        would update the password for the user.\n*/\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass ForgotPass extends Component {\n  constructor(props) {\n    super(props);\n    /*\n                   email: User's input in the email box\n                    auth_server: Auth code from server, keep this as empty string until\n                                server confirms the email\n                    auth_user: User's input in the box for auth code\n                    auth_status: Whether the request for auth code is successful\n                                (0 is success, 1 is fail)\n                    auth_success: Whether the user has successfully authenticated against\n                                 the code from server. Lock email box upon success so\n                                 the user couldn't swap the email after auth and change\n                                 someone else's password.\n    */\n\n    this.state = {\n      email: '',\n      auth_server: '',\n      auth_user: '',\n      auth_status: '',\n      auth_success: false\n    }; // this binding for functions\n\n    this.handleSubmitReg = this.handleSubmitReg.bind(this);\n    this.handleSubmitAuth = this.handleSubmitAuth.bind(this);\n    this.requestAuthCode = this.requestAuthCode.bind(this);\n    this.checkAuthCode = this.checkAuthCode.bind(this);\n    this.regForm = this.regForm.bind(this);\n    this.authForm = this.authForm.bind(this);\n  }\n  /*\n      Makes a POST request to UpdatePassword API. Unless we introduce some restriction on password,\n      there's no way this function / API call can fail, so we just re-direct user to login page.\n  */\n\n\n  handleSubmitReg(event) {\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      // Note the body here contains user's email and new password\n      body: JSON.stringify({\n        password: this.state.password,\n        email: this.state.email\n      })\n    };\n    fetch('http://127.0.0.1:8000/account/update_password/', requestOptions).then(response => response.json()).then(data => {\n      this.setState({}, () => {\n        // This setState({?} (?) => {???}) thing seems to be a trick to wait till fetch is finished\n        // before executing the arrow function? I'm not sure but it works.\n        window.location.href = 'http://localhost:3000/login';\n      });\n    }).catch(console.log);\n    event.preventDefault();\n  }\n  /*\n      Makes a POST request to GenEmailAuth API, and stores the response (server-generated auth code, and status code)\n      in auth_server and auth_status.\n  */\n\n\n  handleSubmitAuth(event) {\n    //        console.log(\"Yay\");\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email: this.state.email,\n        mode: 'fpwd'\n      })\n    };\n    fetch('http://127.0.0.1:8000/account/gen_auth/', requestOptions).then(response => response.json()).then(data => {\n      this.setState({\n        auth_server: data['auth_server'].toString(),\n        auth_status: data['status']\n      });\n    }).catch(console.log);\n    event.preventDefault();\n  }\n  /*\n      Shows the button for requesting an auth code. If email is not associated with any account, show err msg here.\n  */\n\n\n  requestAuthCode() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [this.state.auth_status === 1 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.errorMessage,\n        children: \" No user associated with this email \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 46\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: this.handleSubmitAuth,\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Send Code\",\n          className: styles.button\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true);\n  }\n  /*\n      If auth_success is True, meaning the user has successfully authenticated against the server-generated code,\n      then display \"Verification Success\". Otherwise, render the authForm, which would ask user to enter\n      the auth code they received.\n  */\n\n\n  checkAuthCode() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: this.state.auth_success ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.successMessage,\n        children: \"Verification Success\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 37\n      }, this) : /*#__PURE__*/_jsxDEV(this.authForm, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 101\n      }, this)\n    }, void 0, false);\n  }\n  /*\n      Renders a textbox that records user's input for auth code, and a button which sets auth_success to True if the code user inputs matches the one from the server, or False otherwise.\n  */\n\n\n  authForm() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(_Fragment, {\n        children: \"A Code Has Been Sent\"\n      }, void 0, false), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: event => {\n          this.setState({\n            auth_success: this.state.auth_user === this.state.auth_server\n          });\n          event.preventDefault();\n        },\n        className: styles.formWrapper,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Enter your verification code here:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: this.state.auth_user,\n          className: \"field\",\n          style: {\n            width: \"100px\"\n          },\n          onChange: event => {\n            this.setState({\n              auth_user: event.target.value\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Verify\",\n          className: styles.button\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true);\n  }\n  /*\n      Renders a textbox that records user's input for password, and a box for submitting that.\n       Note that the submit button is disabled until auth_success becomes True.\n  */\n\n\n  regForm() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.wrapper,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"formTitle\",\n          children: \"Create a new password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: this.handleSubmitReg,\n          className: styles.formWrapper,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: this.state.password,\n            className: \"field\",\n            placeholder: \"Password\",\n            onChange: event => {\n              this.setState({\n                password: event.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Submit\",\n            className: styles.button,\n            disabled: !this.state.auth_success\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }, this)\n    }, void 0, false);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(LoggedInTester, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.wrapper,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"formTitle\",\n          children: \"Email verification\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: this.state.email,\n          className: \"field\",\n          disabled: this.state.auth_success,\n          placeholder: \"Email\",\n          onChange: event => {\n            this.setState({\n              email: event.target.value\n            });\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 9\n        }, this), this.state.auth_server ? /*#__PURE__*/_jsxDEV(this.checkAuthCode, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(this.requestAuthCode, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(this.regForm, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default ForgotPass;","map":{"version":3,"names":["React","Component","LoggedInTester","styles","ForgotPass","constructor","props","state","email","auth_server","auth_user","auth_status","auth_success","handleSubmitReg","bind","handleSubmitAuth","requestAuthCode","checkAuthCode","regForm","authForm","event","requestOptions","method","headers","body","JSON","stringify","password","fetch","then","response","json","data","setState","window","location","href","catch","console","log","preventDefault","mode","toString","errorMessage","button","successMessage","formWrapper","width","target","value","wrapper","render"],"sources":["/Users/evelyn/Documents/GitHub/UC-Socially-Undead/src/frontend/src/pages/ForgotPass.js"],"sourcesContent":["import React, { Component } from 'react';\n\nimport LoggedInTester from '../buttons/LoggedInTester';\nimport styles from '../styles/ForgotPass.module.css'\n\n/*\n    Basically the workflow of this page goes like this.\n\n    1. User inputs email, and then when the \"Send Code\" button is hit, handleSubmitAuth is called.\n\n    2. handleSubmitAuth makes a call to the GenEmailAuth API on the server.\n        a. GenEmailAuth requires two input. One is the email for us to send the code to, another\n            is the mode indicator. Here, we indicated that we are in fpwd(forgot password) mode.\n\n        b. GenEmailAuth would then check whether the email is associated with any accounts.\n            In forgot password mode, there is supposed to be exactly one account that's associated, so\n            if there's none, GenEmailAuth would let us know by:\n                i. signaling something is wrong by sending auth_status = 1\n                ii. return an empty string as the authentication code. This is important because the\n                    default for auth_server is empty string and that's how we check if we have received\n                    a real authentication code from the server.\n\n        c. If there is, indeed, an account associated with the account, then GenEmailAuth generates a 8-digit\n            token, and sends it back to the front-end, which the front-end then stores as auth_server.\n\n            Now, realistically, GenEmailAuth is also supposed to send an email to the user, we will make that happen\n            down the road. To test the functionality, since the tokens are transmitted in plaintext, we could inspect\n            its value in the network section of the developer's mode.\n\n    3. Now that a code has been retrieved, auth_server is no longer empty string, so instead of requestAuthCode,\n        checkAuthCode is now going to be displayed, which:\n            a. Displays authForm, which takes in user's input for the authentication code, and\n                checks it against the code that server has sent us. Upon success, we mark auth_success to be True, at\n                which point...\n\n            b. Displays a \"Verification Success\" in place of the auth form.\n\n    4. With auth_success = True, !auth_sucess = False, so the submit button for the textbox that contains user's input\n        for new password would no longer be disabled. At this point, the user could input the desired new password, and\n        upon hitting submit, we call UpdatePassword API on the backend with the supplied password, and UpdatePassword\n        would update the password for the user.\n*/\n\nclass ForgotPass extends Component {\n    constructor(props) {\n      super(props);\n      /*\n                     email: User's input in the email box\n\n                     auth_server: Auth code from server, keep this as empty string until\n                                  server confirms the email\n\n                     auth_user: User's input in the box for auth code\n\n                     auth_status: Whether the request for auth code is successful\n                                  (0 is success, 1 is fail)\n\n                     auth_success: Whether the user has successfully authenticated against\n                                   the code from server. Lock email box upon success so\n                                   the user couldn't swap the email after auth and change\n                                   someone else's password.\n      */\n      this.state = { email: '',\n                     auth_server: '',\n                     auth_user: '',\n                     auth_status: '',\n                     auth_success: false,\n                    };\n\n      // this binding for functions\n      this.handleSubmitReg = this.handleSubmitReg.bind(this);\n      this.handleSubmitAuth = this.handleSubmitAuth.bind(this);\n\n      this.requestAuthCode = this.requestAuthCode.bind(this);\n      this.checkAuthCode = this.checkAuthCode.bind(this);\n\n      this.regForm = this.regForm.bind(this);\n      this.authForm = this.authForm.bind(this);\n    }\n\n    /*\n        Makes a POST request to UpdatePassword API. Unless we introduce some restriction on password,\n        there's no way this function / API call can fail, so we just re-direct user to login page.\n    */\n    handleSubmitReg(event) {\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json', },\n            // Note the body here contains user's email and new password\n            body: JSON.stringify({ password: this.state.password,\n                                   email: this.state.email,\n                                   })\n        };\n\n        fetch('http://127.0.0.1:8000/account/update_password/', requestOptions)\n              .then(response => response.json())\n              .then((data) => {\n                this.setState({}, () => {\n                    // This setState({?} (?) => {???}) thing seems to be a trick to wait till fetch is finished\n                    // before executing the arrow function? I'm not sure but it works.\n                    window.location.href = 'http://localhost:3000/login';\n              })\n        })\n        .catch(console.log)\n\n        event.preventDefault();\n    }\n\n    /*\n        Makes a POST request to GenEmailAuth API, and stores the response (server-generated auth code, and status code)\n        in auth_server and auth_status.\n    */\n    handleSubmitAuth(event) {\n//        console.log(\"Yay\");\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json', },\n            body: JSON.stringify({ email: this.state.email,\n                                   mode: 'fpwd'})\n        };\n\n        fetch('http://127.0.0.1:8000/account/gen_auth/', requestOptions)\n              .then(response => response.json())\n              .then((data) => {\n                    this.setState({ auth_server: data['auth_server'].toString(),\n                                    auth_status: data['status']})\n        })\n        .catch(console.log)\n\n        event.preventDefault();\n    }\n\n    /*\n        Shows the button for requesting an auth code. If email is not associated with any account, show err msg here.\n    */\n    requestAuthCode() {\n        return(\n        <>\n            { this.state.auth_status === 1 ? <p className={styles.errorMessage}> No user associated with this email </p> : <></>}\n            <br />\n            <form onSubmit = {this.handleSubmitAuth}>\n                <input \n                    type=\"submit\" \n                    value=\"Send Code\" \n                    className={styles.button}\n                />\n            </form>\n        </>\n        )\n    }\n\n    /*\n        If auth_success is True, meaning the user has successfully authenticated against the server-generated code,\n        then display \"Verification Success\". Otherwise, render the authForm, which would ask user to enter\n        the auth code they received.\n    */\n    checkAuthCode() {\n        return(<>\n        { this.state.auth_success ? <p className={styles.successMessage}>Verification Success</p> : <this.authForm /> }\n        </>)\n    }\n\n    /*\n        Renders a textbox that records user's input for auth code, and a button which sets auth_success to True if the code user inputs matches the one from the server, or False otherwise.\n    */\n    authForm() {\n        return(\n        <>\n            <>A Code Has Been Sent</>\n            <form \n                onSubmit = {(event) => { \n                    this.setState({ auth_success: (this.state.auth_user === this.state.auth_server) \n                    });\n                    event.preventDefault();\n                }}\n                className={styles.formWrapper}>\n                <p>Enter your verification code here:</p>\n                <input \n                    type=\"text\" \n                    value={this.state.auth_user} \n                    className=\"field\"\n                    style={{width: \"100px\"}}\n                    onChange={(event) => {\n                        this.setState({ auth_user: event.target.value })\n                    }} /> \n                <br />\n                <input type=\"submit\" value=\"Verify\" className={styles.button}/>\n            </form>\n        </>\n        )\n    }\n\n    /*\n        Renders a textbox that records user's input for password, and a box for submitting that.\n\n        Note that the submit button is disabled until auth_success becomes True.\n    */\n    regForm() {\n        return (\n        <>\n            <div className={styles.wrapper}>\n            <p className=\"formTitle\">Create a new password</p>\n            <form onSubmit={this.handleSubmitReg}\n            className={styles.formWrapper}>\n            <input \n                type=\"text\" \n                value={this.state.password} \n                className=\"field\"\n                placeholder=\"Password\"\n                onChange={(event) => {\n                    this.setState({ password: event.target.value })\n                }} /> \n            <br />\n\n            {/* More robust error handling here? (Keep disabled until all fields non-empty) */}\n            <input \n                type=\"submit\" \n                value=\"Submit\" \n                className={styles.button}\n                disabled= {!this.state.auth_success}\n            />\n            </form>\n            </div>\n        </>\n        )\n    }\n\n    render() {\n      return (\n        <>\n        {/* Shows Login status / link to login/out */}\n        <LoggedInTester />\n\n        {/* Textbox for email. Note we disable this box upon auth success*/}\n        <div className={styles.wrapper}>\n        <p className=\"formTitle\">Email verification</p>\n        <input \n        type=\"text\" \n        value={this.state.email} \n        className=\"field\"\n        disabled={this.state.auth_success}\n        placeholder=\"Email\"\n        onChange={(event) => {\n            this.setState({ email: event.target.value })\n        }} />\n\n        {/*\n            If server has sent a non-empty code, show interface for verifying that code.\n            Otherwise, show interface for sending a code\n         */}\n        {this.state.auth_server ?\n            <this.checkAuthCode /> :\n            <this.requestAuthCode />}\n        </div>\n\n        <this.regForm />\n        \n        </>\n      );\n    }\n  }\n\n  export default ForgotPass\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}