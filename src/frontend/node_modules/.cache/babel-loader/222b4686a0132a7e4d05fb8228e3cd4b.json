{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\John\\\\Desktop\\\\UC-Socially-Undead\\\\frontend\\\\src\\\\pages\\\\Login.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport LoggedInTester from '../buttons/LoggedInTester';\nimport '../styles/Login.css'; //import '../styles/index.css'\n\nimport trident from '../icons/trident.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      token: '',\n      failed: false\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(event) {\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username: this.state.username,\n        password: this.state.password\n      })\n    };\n    this.setState({\n      username: '',\n      password: ''\n    });\n    fetch('http://127.0.0.1:8000/account/token_auth/', requestOptions).then(response => response.json()).then(data => {\n      this.setState({\n        token: data['token']\n      }, () => {\n        this.foo();\n      });\n    }).catch(console.log);\n    event.preventDefault();\n  } // On success, store the token somewhere and redirect to profile\n\n\n  foo() {\n    if (this.state.token) {\n      localStorage.setItem('auth-token', 'Token ' + this.state.token);\n      this.render(); //route\n\n      window.location.href = 'http://localhost:3000/profile';\n    } else {\n      this.setState({\n        failed: true\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(LoggedInTester, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logo\",\n        id: \"logo\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: trident,\n          className: \"logo-pic\",\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"logo-text\",\n          children: \"UC Socially Undead\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"form-title\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), this.state.failed ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-error\",\n          children: \"Login Failed\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 32\n        }, this) : console.log(\"\"), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: this.handleSubmit,\n          className: \"form-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"field\",\n            value: this.state.username,\n            placeholder: \"Username\",\n            onChange: event => {\n              this.setState({\n                username: event.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 11\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 18\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"field\",\n            value: this.state.password,\n            placeholder: \"Password\",\n            onChange: event => {\n              this.setState({\n                password: event.target.value\n              });\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 11\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            value: \"Submit\",\n            className: \"button\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/forgot_pass\",\n          state: {\n            from: \"occupation\"\n          },\n          className: \"link\",\n          children: \"Forgot your password?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          state: {\n            from: \"occupation\"\n          },\n          className: \"link\",\n          children: \"Don't have an account? Create account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default Login;","map":{"version":3,"names":["React","Component","Link","LoggedInTester","trident","Login","constructor","props","state","username","password","token","failed","handleSubmit","bind","event","requestOptions","method","headers","body","JSON","stringify","setState","fetch","then","response","json","data","foo","catch","console","log","preventDefault","localStorage","setItem","render","window","location","href","target","value","from"],"sources":["C:/Users/John/Desktop/UC-Socially-Undead/frontend/src/pages/Login.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport LoggedInTester from '../buttons/LoggedInTester';\nimport '../styles/Login.css'\n//import '../styles/index.css'\nimport trident from '../icons/trident.png';\n\nclass Login extends Component {\n    constructor(props) {\n      super(props);\n      this.state = { username: '',\n                     password: '',\n                     token: '',\n                     failed: false };\n\n      this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n\n    handleSubmit(event) {\n        const requestOptions = {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({ \n              username: this.state.username,password: this.state.password})\n        };\n\n        this.setState({ username: '' ,\n                        password: ''})\n    \n        fetch('http://127.0.0.1:8000/account/token_auth/', requestOptions)\n              .then(response => response.json())\n              .then((data) => {\n                this.setState({ token: data['token'] }, () => {\n                    this.foo()\n              })\n        })\n        .catch(console.log)\n\n        event.preventDefault();\n    }\n\n    // On success, store the token somewhere and redirect to profile\n    foo() {\n        if (this.state.token) {\n            localStorage.setItem('auth-token', 'Token ' + this.state.token );\n\n            this.render();\n            //route\n            window.location.href = 'http://localhost:3000/profile';\n        } else {\n            this.setState({ failed: true })\n        }\n    }\n\n  \n    render() {\n      return ( \n        <>\n\n        <LoggedInTester />\n\n        <div className=\"logo\" id=\"logo\">\n\t\t\t    <img src={trident} className=\"logo-pic\" alt=\"\"/> \n          <p className=\"logo-text\">UC Socially Undead</p>\n\t\t    </div>\n\n        <div className=\"wrapper\">\n          <p className=\"form-title\">Login</p>\n          {this.state.failed ? <div className=\"login-error\">Login Failed</div> : console.log(\"\")}\n          <form onSubmit={this.handleSubmit}\n          className=\"form-wrapper\"> \n\n          <input \n            type=\"text\" \n            className=\"field\"\n            value={this.state.username}\n            placeholder=\"Username\"\n            onChange={(event) => {\n              this.setState({ username: event.target.value })\n            }}/> <br />\n\n          <input \n          type=\"text\" \n          className=\"field\"\n          value={this.state.password} \n          placeholder=\"Password\"\n          onChange={(event) => {\n            this.setState({ password: event.target.value })\n          }}/> <br />\n\n          <input type=\"submit\" value=\"Submit\" className=\"button\"/>\n\n          </form>\n\n          <Link to=\"/forgot_pass\" state={{ from: \"occupation\" }}\n          className=\"link\">\n            Forgot your password?\n          </Link>\n\n          <Link to=\"/register\" state={{ from: \"occupation\" }}\n          className=\"link\">\n            Don't have an account? Create account\n          </Link>\n\n        </div>\n        </>\n      );\n    }\n  }\n\n  export default Login"],"mappings":"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"},"metadata":{},"sourceType":"module"}