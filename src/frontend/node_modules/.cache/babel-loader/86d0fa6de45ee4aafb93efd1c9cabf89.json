{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jiting Shen\\\\Documents\\\\GitHub\\\\UC-Socially-Undead\\\\src\\\\frontend\\\\src\\\\pages\\\\Calendar.js\";\nimport React from 'react';\nimport LoggedInTester from '../buttons/LoggedInTester';\nimport styles from '../styles/Calendar.module.css';\nimport Calendars from './components/CalendarUI.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Calendar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      user_id: '',\n      ical_link: '',\n      cal: []\n    };\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.getCalendar = this.getCalendar.bind(this);\n  }\n\n  componentDidMount() {\n    const headers = {\n      \"Content-Type\": \"application/json\"\n    };\n\n    if (localStorage.getItem('auth-token')) {\n      headers[\"Authorization\"] = localStorage.getItem('auth-token');\n    }\n\n    fetch('http://127.0.0.1:8000/connect/get_info/', {\n      headers\n    }).then(response => response.json()).then(data => {\n      this.setState({\n        user_id: data.id\n      }, () => {\n        //console.log()\n        this.getCalendar();\n      });\n    }).catch(console.log);\n  }\n\n  handleSubmit() {\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': localStorage.getItem('auth-token')\n      },\n      body: JSON.stringify({\n        ical_link: this.state.ical_link\n      })\n    };\n    fetch('http://127.0.0.1:8000/schedule/upload_schedule/', requestOptions).then(response => response.json())\n    /*\r\n    .then((data) => {\r\n      this.setState({ }, () => {\r\n        console.log()})\r\n    })\r\n    */\n    .catch(console.log);\n  }\n\n  getCalendar() {\n    const headers = {\n      \"Content-Type\": \"application/json\"\n    };\n\n    if (localStorage.getItem('auth-token')) {\n      headers[\"Authorization\"] = localStorage.getItem('auth-token');\n    }\n\n    fetch('http://127.0.0.1:8000/schedule/get_schedule/', {\n      headers\n    }).then(response => response.json()).then(data => {\n      this.setState({\n        cal: data\n      }, () => {//console.log(data)\n      });\n    }).catch(console.log);\n  }\n  /* No longer needed\r\n  ShowCalendar({ cal }) {\r\n    return(\r\n      <div>\r\n        {cal.map(e => \r\n        <div className={styles.eventWrapper}>\r\n          <h1 className={styles.eventTitle}>Event: {e.event}</h1>\r\n          <p className={styles.eventDescrip}>Description: {e.event}</p>\r\n        </div>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n  */\n\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(LoggedInTester, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: localStorage.getItem('auth-token')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 7\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          color: 'white'\n        },\n        children: \"iCal Link\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        onChange: event => {\n          this.setState({\n            ical_link: event.target.value\n          });\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: this.handleSubmit,\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Calendars, {\n        cal: this.state.cal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default Calendar;","map":{"version":3,"names":["React","LoggedInTester","styles","Calendars","Calendar","Component","constructor","props","state","user_id","ical_link","cal","handleSubmit","bind","getCalendar","componentDidMount","headers","localStorage","getItem","fetch","then","response","json","data","setState","id","catch","console","log","requestOptions","method","body","JSON","stringify","render","color","event","target","value"],"sources":["C:/Users/Jiting Shen/Documents/GitHub/UC-Socially-Undead/src/frontend/src/pages/Calendar.js"],"sourcesContent":["import React from 'react';\r\nimport LoggedInTester from '../buttons/LoggedInTester';\r\nimport styles from '../styles/Calendar.module.css'\r\nimport Calendars from './components/CalendarUI.js'\r\n\r\nclass Calendar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { \r\n      user_id: '',\r\n      ical_link: '',\r\n      cal: []\r\n    };\r\n\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.getCalendar = this.getCalendar.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    const headers = {\"Content-Type\": \"application/json\"};\r\n\r\n    if (localStorage.getItem('auth-token')) {\r\n        headers[\"Authorization\"] = localStorage.getItem('auth-token');\r\n    }\r\n\r\n    fetch('http://127.0.0.1:8000/connect/get_info/', { headers, })\r\n        .then(response => response.json())\r\n        .then((data) => {\r\n          this.setState({user_id: data.id}, () => {\r\n            //console.log()\r\n            this.getCalendar()})\r\n        })\r\n    .catch(console.log)\r\n  }\r\n\r\n  handleSubmit() {\r\n    const requestOptions = {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json', 'Authorization': localStorage.getItem('auth-token'),},\r\n      body: JSON.stringify({ \r\n        ical_link: this.state.ical_link,})\r\n    };\r\n  \r\n    fetch('http://127.0.0.1:8000/schedule/upload_schedule/', requestOptions)\r\n      .then(response => response.json())\r\n      /*\r\n      .then((data) => {\r\n        this.setState({ }, () => {\r\n          console.log()})\r\n      })\r\n      */\r\n      .catch(console.log)\r\n  }\r\n\r\n  getCalendar() {\r\n    const headers = {\"Content-Type\": \"application/json\"};\r\n\r\n    if (localStorage.getItem('auth-token')) {\r\n        headers[\"Authorization\"] = localStorage.getItem('auth-token');\r\n    }\r\n\r\n    fetch('http://127.0.0.1:8000/schedule/get_schedule/', { headers, })\r\n        .then(response => response.json())\r\n        .then((data) => {\r\n          this.setState({cal: data}, () => {\r\n            //console.log(data)\r\n          })\r\n        })\r\n    .catch(console.log)\r\n  }\r\n\r\n  /* No longer needed\r\n  ShowCalendar({ cal }) {\r\n    return(\r\n      <div>\r\n        {cal.map(e => \r\n        <div className={styles.eventWrapper}>\r\n          <h1 className={styles.eventTitle}>Event: {e.event}</h1>\r\n          <p className={styles.eventDescrip}>Description: {e.event}</p>\r\n        </div>\r\n        )}\r\n      </div>\r\n    )\r\n  }\r\n  */\r\n\r\n  render() {\r\n    return(<>\r\n      <LoggedInTester />\r\n      <p>{ localStorage.getItem('auth-token') }</p>\r\n      <br /> <br />\r\n\r\n      <label style={{color: 'white'}}>iCal Link</label>\r\n      <br />\r\n\r\n      <input \r\n      onChange={(event) => {\r\n        this.setState({ ical_link: event.target.value })}}>\r\n      </input>\r\n      <br />\r\n\r\n      <button onClick={this.handleSubmit}>Submit</button>\r\n      <br />\r\n\r\n      <Calendars cal={this.state.cal}/>\r\n    </>)\r\n  }\r\n}\r\n\r\nexport default Calendar"],"mappings":"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"},"metadata":{},"sourceType":"module"}